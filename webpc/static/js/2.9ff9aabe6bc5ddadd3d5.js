webpackJsonp([2],{Lm6h:function(t,e){},cNJz:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=i("M9A7"),n=i("zL8q"),s={data:function(){return{hbimg:[{img:"https://guanfan.oss-cn-hangzhou.aliyuncs.com/apk/bg1.jpg",id:0},{img:"https://guanfan.oss-cn-hangzhou.aliyuncs.com/apk/bg2.jpg",id:1},{img:"https://guanfan.oss-cn-hangzhou.aliyuncs.com/apk/bg3.jpg",id:2}],btnText:"获取验证码",countdown:60,dialogVisible:!1,ruleForm:{phone:"",verify:"",type:2},loginRules:{phone:[{requird:!0,trigger:"blur"}],verify:[{requird:!0,trigger:"blur",validator:function(t,e,i){e.length<6?i(new Error("验证码不能小于6位")):i()}}]}}},methods:{login:function(){var t=this;this.$refs.ruleForm.validate(function(e){if(!e)return!1;t.$store.dispatch("LoginByCode",t.ruleForm).then(function(){t.getUser()}).catch(function(){})})},getUser:function(){var t=this;this.$store.dispatch("GetUserInfo").then(function(e){t.$router.push({path:t.redirect||"/"})}).catch(function(t){})},getCode:function(){""!=this.ruleForm.phone?(this.sendsms(),this.setTime()):this.$message.error("请输入手机号")},setTime:function(){if(0==this.countdown)return this.btnText="获取验证码",void(this.countdown=60);setTimeout(this.setTime,1e3),this.btnText="("+this.countdown+"s)后重新发送",this.countdown--},sendsms:function(){var t=this;Object(o.f)(this.ruleForm.phone,1).then(function(e){e.data.success?t.setTime():Object(n.Message)({message:e.message,type:"error",duration:5e3})}).catch(function(t){console.log(t)})},guanbi:function(){this.$router.push({path:this.redirect||"/"})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"bg"},[i("el-carousel",{attrs:{"indicator-position":"none",height:"100vh"}},t._l(t.hbimg,function(t){return i("el-carousel-item",{key:t.id},[i("img",{staticClass:"hbimg",attrs:{src:t.img}})])}),1),t._v(" "),i("div",{staticClass:"login"},[i("span",{staticClass:"guanbi",on:{click:function(e){return t.guanbi()}}}),t._v(" "),i("div",{staticClass:"box"},[i("h3",[t._v("登录管饭账号")]),t._v(" "),i("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,"status-icon":"","label-width":"0px"}},[i("el-form-item",{attrs:{prop:"name"}},[i("el-input",{staticClass:"dlinput",attrs:{placeholder:"输入11位手机号码",type:"tel",autocomplete:"off",clearable:""},model:{value:t.ruleForm.phone,callback:function(e){t.$set(t.ruleForm,"phone",e)},expression:"ruleForm.phone"}})],1),t._v(" "),i("el-form-item",{staticClass:"dlinput",attrs:{prop:"verify"}},[i("el-input",{staticStyle:{width:"164px"},attrs:{type:"text",placeholder:"输入6位验证码",autocomplete:"off",clearable:""},model:{value:t.ruleForm.verify,callback:function(e){t.$set(t.ruleForm,"verify",e)},expression:"ruleForm.verify"}}),t._v(" "),i("el-button",{on:{click:function(e){return t.getCode()}}},[t._v(t._s(t.btnText))])],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0"}},[i("router-link",{staticStyle:{float:"left"},attrs:{to:"/login"}},[t._v("密码登录")])],1),t._v(" "),i("el-form-item",{staticStyle:{"margin-bottom":"0"}},[i("el-button",{staticClass:"dlbtn",on:{click:function(e){return t.login()}}},[t._v("登录")])],1)],1),t._v(" "),i("div",{staticClass:"tongyi text-12"},[i("span",[t._v(" 登录/注册即同意")]),t._v(" "),i("el-button",{attrs:{type:"text"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("《管饭用户及隐私协议》")])],1),t._v(" "),i("el-dialog",{attrs:{title:"管饭用户及隐私协议",visible:t.dialogVisible,width:"50%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("iframe",{attrs:{width:"100%",height:"400px",src:"https://api.guanfan.top/web/about/about.html"}}),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确认同意")])],1)])],1),t._v(" "),i("div",{staticClass:"registe"},[i("p",[i("router-link",{attrs:{to:"/signup"}},[t._v("还没有账号？注册管饭账号")])],1)])])],1)},staticRenderFns:[]};var a=i("VU/8")(s,r,!1,function(t){i("Lm6h")},"data-v-e1d99ac6",null);e.default=a.exports}});
//# sourceMappingURL=2.9ff9aabe6bc5ddadd3d5.js.map