webpackJsonp([16],{BGDK:function(t,e){},F9sF:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("JJSs"),a=s("HwgM"),o=s("wqlu"),n=s("8Jho"),l=s("mzkE"),r=s("lCmq"),c=s("3/Li"),d=s("zL8q"),u={inject:["reload"],components:{RightView:a.a,FoodItem:o.a,headerNav:i.a,FooterBottom:l.a,Totop:n.a},data:function(){return{num:13,osshost:"https://guanfan.oss-cn-hangzhou.aliyuncs.com/",listpic:"?x-oss-process=style/list-img",userface:"?x-oss-process=style/user-img",detailpic:"?x-oss-process=style/detail-img",sortList:"",dtDetail:[],loadMore:!0,token:"",commentList:[],replyShow:!1,reply2Show:!1,input_placeholder:"来了说两句吧~",is_reply:!1,page:1,beuserid:0,message:"",replyid:0,replyuserid:0,commentid:0,message1:"",message2:"",did:"",swiperList:[]}},created:function(){this.token=this.$store.state.user.token||"",this.did=this.$route.query.id,this.getDataInfo(this.did),this.getCommentList()},methods:{getDataInfo:function(t){var e=this;Object(r.c)(t).then(function(t){var s=t.data;if(s.success){e.dtDetail=s.result,e.swiperList=e.dtDetail.dtimg.split("|"),e.dtDetail.relation_item.stuff=e.dtDetail.relation_item.stuff.split("|");for(var i=0;i<e.dtDetail.relation_item.stuff.length;i++){var a;a=e.dtDetail.relation_item.stuff[i].split("#"),e.dtDetail.relation_item.stuff[i]=a[0]}}else Object(d.Message)({message:t.message,type:"error",duration:5e3})}).catch(function(t){console.log(t)})},pushdz:function(){var t=this;this.token&&Object(c.d)(this.did,1).then(function(e){e.data.success?(Object(d.Message)({message:"你送了一根棒棒糖",type:"success",duration:5e3}),t.reload()):Object(d.Message)({message:e.message,type:"error",duration:5e3})}).catch(function(t){})},unpushdz:function(){var t=this;this.token&&Object(c.h)(this.did,1).then(function(e){e.data.success?(Object(d.Message)({message:"你把棒棒糖要回来了",type:"success",duration:5e3}),t.reload()):Object(d.Message)({message:e.message,type:"error",duration:5e3})}).catch(function(t){})},getCommentList:function(){var t=this;Object(c.b)(this.did,1,this.page).then(function(e){var s=e.data;s.success?0!=s.result.length?t.commentList=t.commentList.concat(s.result):t.loadMore=!1:Object(d.Message)({message:e.message,type:"error",duration:5e3})}).catch(function(t){console.log(t)})},loadMorep:function(){this.page++,this.getCommentList()},comment:function(t,e){""==this.token?navigateTo("../login/pswLogin"):(this.replyShow=!0,this.beuserid=t,this.commentid=e)},reply:function(t,e,s,i){this.is_reply=!0,this.replyShow=!0;var a=i;this.input_placeholder="回复"+a,this.replyid=0,this.replyuserid=0,this.beuserid=e,this.commentid=s,console.log(this.commentid,this.beuserid)},reply2:function(t,e,s,i,a){this.is_reply=!0,this.replyShow=!0;var o=a;this.input_placeholder="回复"+o,this.replyid=t,this.beuserid=e,this.replyuserid=s,this.commentid=i},postComment:function(){var t=this;if(""==this.token)this.$router.push({path:"/login"});else{this.message;var e={itemid:this.did,itemtype:1,replyid:this.replyid,replyuserid:this.replyuserid,commentid:this.commentid,beuserid:this.beuserid,message:this.message};Object(c.e)(e).then(function(e){var s=e.data;s.success?(Object(d.Message)({message:s.message,duration:5e3}),document.getElementById("reply").scrollIntoView(),t.page=0,t.commentList=[],t.getCommentList(),t.is_reply=!1,t.replyShow=!1):(Object(d.Message)({message:s.message,type:"error",duration:5e3}),"9999"==s.code&&t.$router.push({path:"/login"}))}).catch(function(t){console.log(t)})}},attentionUser:function(t){var e=this;this.token?followUser(t).then(function(t){t.data.success?0==e.dtDetail.relationship?e.dtDetail.relationship=1:2==e.dtDetail.relationship&&(e.dtDetail.relationship=3):Object(d.Message)({message:t.message,type:"error",duration:5e3})}).catch(function(t){console.log(t)}):this.$router.push({path:"/login"})},unAttentionUser:function(t){var e=this;this.token?unfollowUser(t).then(function(t){t.data.success?1==e.dtDetail.relationship?e.dtDetail.relationship=0:3==e.dtDetail.relationship&&(e.dtDetail.relationship=2):Object(d.Message)({message:t.message,type:"error",duration:5e3})}).catch(function(t){console.log(t)}):this.$router.push({path:"/login"})},navToIndex:function(t){this.$router.push({path:"/user",query:{id:t}})},navToDetail:function(t){this.$router.push({path:"/cookBook",query:{id:t}})}}},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{attrs:{id:"header"}},[s("header-nav")],1),t._v(" "),s("div",{staticClass:"content mt30 clearfix padding-top-60",attrs:{id:"content"}},[s("div",{staticClass:"mr30 mt30 mb30",attrs:{id:"left"}},[1==t.swiperList.length?s("div",{staticClass:"bg-img mainImg br5",style:{backgroundImage:"url("+t.osshost+t.swiperList[0]+t.detailpic+")"}}):s("el-carousel",{attrs:{height:"456px"}},t._l(t.swiperList,function(e,i){return s("el-carousel-item",{key:i},[s("div",{staticClass:"bg-img mainImg br5",style:{backgroundImage:"url("+t.osshost+e+t.detailpic+")"}})])}),1),t._v(" "),s("div",[s("ul",{staticClass:"dr_list dr_list2 mt20"},[s("li",{staticClass:"clearfix mb15"},[s("div",{staticClass:"left headicon bg-img br50",style:{backgroundImage:"url("+t.osshost+t.dtDetail.faceimg+t.userface+")"},on:{click:function(e){return t.navToIndex(t.dtDetail.userId)}}}),t._v(" "),s("div",{staticClass:"info"},[s("h2",{staticClass:"text-bold text-df"},[t._v(t._s(t.dtDetail.nickname))])]),t._v(" "),0==t.dtDetail.relationship||2==t.dtDetail.relationship?s("a",{staticClass:"right",on:{click:function(e){return t.attentionUser(t.dtDetail.userId)}}},[s("el-button",{staticClass:"el-icon-plus",attrs:{size:"small",type:"warning",round:""}},[t._v("关注")])],1):s("a",{staticClass:"right",on:{click:function(e){return t.unAttentionUser(t.dtDetail.userId)}}},[s("el-button",{staticClass:"el-icon-close",attrs:{size:"small",round:""}},[t._v("取消关注")])],1)])]),t._v(" "),s("div",{staticClass:"text-df"},[t._v(t._s(t.dtDetail.description))])]),t._v(" "),s("div",{staticClass:"mt50"},[t._l(t.dtDetail.like_people_list,function(e,i){return s("div",{key:i,staticClass:"dzuser",on:{click:function(s){return t.navToIndex(e.userid)}}},[s("el-avatar",{attrs:{src:t.osshost+e.faceimg+t.userface}})],1)}),t._v(" "),s("el-badge",{staticClass:"right",attrs:{value:t.dtDetail.like_num}},[0==t.dtDetail.isliked?s("el-button",{staticClass:"el-icon-lollipop",attrs:{size:"small",type:"success",round:""},on:{click:function(e){return t.pushdz()}}},[t._v("送颗糖给TA\n          ")]):t._e(),t._v(" "),1==t.dtDetail.isliked?s("el-button",{attrs:{size:"small",type:"info",round:""},on:{click:function(e){return t.unpushdz()}}},[t._v("把糖拿回来\n          ")]):t._e()],1)],2),t._v(" "),t.dtDetail.relation_item?s("div",{staticClass:"mt50"},[s("h1",[t._v("关联菜谱")]),t._v(" "),s("div",{staticClass:"tjcp-box"},[s("div",{staticClass:"left tjcp-left"},[s("div",{staticClass:"food-img",style:{backgroundImage:"url("+t.osshost+t.dtDetail.relation_item.cpimg+t.detailpic+")"},on:{click:function(e){return t.navToDetail(t.dtDetail.relation_item.id)}}})]),t._v(" "),s("div",{staticClass:"left tjcp-right ml10"},[s("div",{staticClass:"mt10"},[s("span",{staticClass:"text-bold text-20 text-cut"},[t._v(t._s(t.dtDetail.relation_item.title))])]),t._v(" "),s("div",{staticClass:"grayColor mt10"},t._l(t.dtDetail.relation_item.stuff,function(e,i){return s("span",{key:i,staticClass:"text-12"},[t._v(t._s(e)),i+1!=t.dtDetail.relation_item.stuff.length?s("i",[t._v("、")]):t._e()])}),0)])])]):t._e(),t._v(" "),s("div",{staticClass:"mt50"},[s("div",{staticClass:"text-df mt20"},[s("p",{staticClass:"grayColor"},[t._v("创建时间："+t._s(t.dtDetail.pushtime))])])]),t._v(" "),s("div",{},[s("p",{staticClass:"fcc text-lips"},[t._v("您当前的位置："),s("a",{attrs:{href:"/",title:""}},[t._v("首页")]),t._v(" \\ "+t._s(t.dtDetail.description))])]),t._v(" "),s("div",{staticClass:"mt50"},[s("h1",{attrs:{id:"reply"}},[t._v("评论"),s("el-button",{staticClass:"right",attrs:{type:"warning"},on:{click:function(e){return t.comment(0,0)}}},[t._v("发表评论")])],1),t._v(" "),s("div",{staticClass:"mt30"},[s("el-dialog",{attrs:{title:"评论回复",visible:t.replyShow,width:"600px","before-close":t.handleClose},on:{"update:visible":function(e){t.replyShow=e}}},[s("form",{staticClass:"cu-form-group"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],attrs:{placeholder:t.input_placeholder},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),s("div",{staticClass:"clearfix"},[s("button",{staticClass:"cu-btn sm bg-yellow right br5 mt10",on:{click:function(e){return t.postComment()}}},[t._v(" 发表评论\n                ")])])])]),t._v(" "),s("div",[s("div",[s("ul",{staticClass:"dr_list"},t._l(t.commentList,function(e,i){return s("li",{key:i,staticClass:"clearfix mb15"},[s("div",{staticClass:"left headicon bg-img br50",style:{backgroundImage:"url("+t.osshost+e.faceimg+t.userface+")"},on:{click:function(s){return t.navToIndex(e.userid)}}}),t._v(" "),s("div",{staticClass:"info",staticStyle:{width:"640px"}},[s("h4",{staticClass:"text-bold text-df"},[t._v(t._s(e.nickname)),e.userid==t.dtDetail.userId?s("span",{staticClass:"text-12 grayColor user-img-boder ml10"},[t._v("作者")]):t._e()]),t._v(" "),s("p",{staticClass:"grayColor"},[t._v(t._s(e.pushtime)+" "),s("span",{staticClass:"mainColor",on:{click:function(s){return t.reply(e.commentid,e.userid,e.id,e.nickname)}}},[t._v("回复")])]),t._v(" "),s("div",[s("p",{staticClass:"text-df text-height-lg"},[t._v(" "+t._s(e.message))])]),t._v(" "),s("ul",{staticClass:"dr_list"},t._l(e.subreplylist,function(i,a){return s("li",{key:a,staticClass:"clearfix mb15"},[s("div",{staticClass:"left headicon bg-img br50",style:{backgroundImage:"url("+t.osshost+i.faceimg+t.userface+")"},on:{click:function(e){return t.navToIndex(i.userid)}}}),t._v(" "),s("div",{staticClass:"info",staticStyle:{width:"440px"}},[s("h4",{staticClass:"text-bold text-df"},[t._v(t._s(i.nickname)),i.userid==t.dtDetail.userId?s("span",{staticClass:"text-12 grayColor user-img-boder ml10"},[t._v("作者")]):t._e()]),t._v(" "),s("p",{staticClass:"grayColor"},[t._v(t._s(i.pushtime)+" "),s("span",{staticClass:"mainColor",on:{click:function(s){return t.reply2(i.id,e.userid,i.userid,i.commentid,i.nickname)}}},[t._v("回复")])]),t._v(" "),s("div",[i.bereplynickname?s("p",{staticClass:"text-14 grayColor"},[t._v("回复:"+t._s(i.bereplynickname))]):t._e(),t._v(" "),s("p",{staticClass:"text-df text-height-lg"},[t._v(" "+t._s(i.message))])])])])}),0)])])}),0),t._v(" "),t.loadMore?s("div",{staticClass:"text-center mainColor mb15",on:{click:function(e){return t.loadMorep()}}},[t._v("点击加载更多")]):s("div",{staticClass:"text-center grayColor mb15"},[t._v("没有评论了")])])])],1)])],1),t._v(" "),s("div",{staticClass:"mt30",attrs:{id:"right"}},[t.dtDetail.userId?s("right-view",{attrs:{uid:t.dtDetail.userId}}):t._e()],1)]),t._v(" "),s("FooterBottom"),t._v(" "),s("Totop")],1)},staticRenderFns:[]};var h=s("VU/8")(u,m,!1,function(t){s("BGDK")},"data-v-21cbd880",null);e.default=h.exports}});
//# sourceMappingURL=16.55a42c4c6fc3e0d7b9df.js.map