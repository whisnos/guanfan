{"version":3,"sources":["webpack:///./src/view/search.vue?f1b3","webpack:///src/view/search.vue","webpack:///./src/view/search.vue?3995","webpack:///./src/view/search.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","title","left-text","left-arrow","on","click-left","$event","back","isiOS","isWeixin","slot","href","type","size","_v","_e","placeholder","show-action","shape","model","value","callback","$$v","expression","click","getFoodList","setout","onLoadMore","enableLoadMore","_l","item","index","key","bookDetail","id","style","backgroundImage","osshost","cpimg","listpic","_s","faceImg","src","imgurl","isThree","userface","nickname","collections","staticRenderFns","searchvue_type_script_lang_js_","components","LoadMore","Totop","totop","data","sortList","foodList","detailpic","page","created","$route","query","getwx","appSource","methods","ua","window","navigator","userAgent","toLowerCase","match","u","appVersion","done","_this","setTimeout","_this2","lib_default","a","stringify","sort","axios_default","method","url","headers","Content-Type","then","response","result","length","concat","i","RegExp","test","$router","go","push","path","view_searchvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2d21a418.9ef03e4a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('van-nav-bar',{staticClass:\"hader\",attrs:{\"title\":\"菜谱搜索\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.back()}}},[(_vm.isiOS != true && _vm.isWeixin != true)?_c('a',{attrs:{\"slot\":\"right\",\"href\":\"https://m.guanfan.top/#/app\"},slot:\"right\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\"安装APP\")])],1):_vm._e(),(_vm.isiOS == true && _vm.isWeixin != true)?_c('a',{attrs:{\"slot\":\"right\",\"href\":\"https://apps.apple.com/cn/app/id1487127641\"},slot:\"right\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\"安装APP\")])],1):_vm._e(),(_vm.isWeixin == true)?_c('a',{attrs:{\"slot\":\"right\",\"href\":\"https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzU0NTg5ODQzNA==&scene=124#wechat_redirect\"},slot:\"right\"},[_c('van-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"}},[_vm._v(\"关注\")])],1):_vm._e()]),_c('div',{staticClass:\"cont mt10\"},[_c('van-search',{staticClass:\"mb10\",attrs:{\"placeholder\":\"请输入搜索关键词\",\"show-action\":\"\",\"shape\":\"round\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_c('div',{attrs:{\"slot\":\"action\"},on:{\"click\":function($event){_vm.getFoodList(_vm.value), _vm.setout()}},slot:\"action\"},[_vm._v(\"搜索\")])]),_c('LoadMore',{attrs:{\"onLoadMore\":_vm.onLoadMore,\"enableLoadMore\":_vm.enableLoadMore}},[_c('div',{staticClass:\"food-list1 food-list2\"},[_c('ul',_vm._l((_vm.foodList),function(item,index){return _c('li',{key:index,on:{\"click\":function($event){return _vm.bookDetail(item.id)}}},[_c('div',{staticClass:\"foodlist-img\",style:({ backgroundImage: 'url(' + _vm.osshost + item.cpimg + _vm.listpic + ')' })}),_c('div',{staticClass:\"food-list1-tit text-cut\"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"user\"},[(!item.faceImg)?_c('img',{attrs:{\"src\":_vm.imgurl}}):_vm._e(),(item.faceImg&&item.isThree==false)?_c('img',{attrs:{\"src\":_vm.osshost + item.faceImg +_vm.userface}}):_vm._e(),(item.faceImg&&item.isThree==true)?_c('img',{attrs:{\"src\":item.faceImg}}):_vm._e(),_c('span',[_vm._v(_vm._s(item.nickname))]),_c('i',{staticClass:\"icon-like2 van-icon van-icon-like\"},[_vm._v(_vm._s(item.collections))])])])}),0)])]),_c('Totop')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n\t<div>\r\n\t\t<van-nav-bar class=\"hader\" title=\"菜谱搜索\" left-text=\"返回\" left-arrow @click-left=\"back()\">\r\n\t\t\t<a href=\"https://m.guanfan.top/#/app\" slot=\"right\" v-if=\"isiOS != true && isWeixin != true\"><van-button type=\"primary\" size=\"small\">安装APP</van-button></a>\r\n\t\t\t<a href=\"https://apps.apple.com/cn/app/id1487127641\" slot=\"right\" v-if=\"isiOS == true && isWeixin != true\">\r\n\t\t\t\t<van-button type=\"primary\" size=\"small\">安装APP</van-button>\r\n\t\t\t</a>\r\n\t\t\t<a href=\"https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzU0NTg5ODQzNA==&scene=124#wechat_redirect\" slot=\"right\" v-if=\"isWeixin == true\">\r\n\t\t\t\t<van-button type=\"primary\" size=\"small\">关注</van-button>\r\n\t\t\t</a>\r\n\t\t</van-nav-bar>\r\n\t\t<div class=\"cont mt10\">\r\n\t\t\t<van-search class=\"mb10\" v-model=\"value\" placeholder=\"请输入搜索关键词\" show-action shape=\"round\">\r\n\t\t\t\t<div slot=\"action\" @click=\"getFoodList(value), setout()\">搜索</div>\r\n\t\t\t</van-search>\r\n\t\t\t<!--左边区域-->\r\n\t\t\t<!--封面图-->\r\n\t\t\t<LoadMore :onLoadMore=\"onLoadMore\" :enableLoadMore=\"enableLoadMore\">\r\n\t\t\t\t<div class=\"food-list1 food-list2\">\r\n\t\t\t\t\t<!-- <mu-load-more @refresh=\"refresh\" :refreshing=\"refreshing\" :loading=\"loading\" @load=\"load\"> -->\r\n\t\t\t\t\t<ul>\r\n\t\t\t\t\t\t<li v-for=\"(item, index) in foodList\" :key=\"index\" @click=\"bookDetail(item.id)\">\r\n\t\t\t\t\t\t\t<div class=\"foodlist-img\" :style=\"{ backgroundImage: 'url(' + osshost + item.cpimg + listpic + ')' }\"></div>\r\n\t\t\t\t\t\t\t<div class=\"food-list1-tit text-cut\">{{ item.title }}</div>\r\n\t\t\t\t\t\t\t<div class=\"user\">\r\n\t\t\t\t\t\t\t\t<img :src=\"imgurl\" v-if=\"!item.faceImg\">\r\n\t\t\t\t\t\t\t\t<img :src=\"osshost + item.faceImg +userface\" v-if=\"item.faceImg&&item.isThree==false\">\r\n\t\t\t\t\t\t\t\t<img :src=\"item.faceImg\" v-if=\"item.faceImg&&item.isThree==true\">\r\n\t\t\t\t\t\t\t\t<span>{{ item.nickname }}</span>\r\n\t\t\t\t\t\t\t\t<i class=\"icon-like2 van-icon van-icon-like\">{{ item.collections }}</i>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t\t<!-- </mu-load-more> -->\r\n\t\t\t\t</div>\r\n\t\t\t</LoadMore>\r\n\t\t\t<Totop></Totop>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport qs from 'qs';\r\n\timport axios from 'axios';\r\nimport LoadMore from '../components/LoadMore.vue';\r\nimport Totop from '../components/totop.vue';\r\nexport default {\r\n\tcomponents: {\r\n\t\tLoadMore,\r\n\t\tTotop\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tsortList: '',\r\n\t\t\tfoodList: [],\r\n\t\t\tosshost: 'http://guanfan.oss-cn-hangzhou.aliyuncs.com/',\r\n\t\t\t// osshost: 'http://guanfan.oss-cn-hangzhou.aliyuncs.com/',\r\n\t\t\tlistpic: '?x-oss-process=style/list-img',\r\n\t\t\tuserface: '?x-oss-process=style/user-img',\r\n\t\t\tdetailpic: '?x-oss-process=style/detail-img',\r\n\t\t\tenableLoadMore: true,\r\n\t\t\tpage: 1,\r\n\t\t\tsize: 10,\r\n\t\t\tkey: '',\r\n\t\t\tvalue: '',\r\n\t\t\tisWeixin: '',\r\n\t\t\tisiOS: '',\r\n\t\t\timgurl: '../assets/img/userIcon.png',\r\n\t\t\tisThree: false\r\n\t\t};\r\n\t},\r\n\tcreated() {\r\n\t\tthis.key = this.$route.query.key;\r\n\t\tthis.value = this.key;\r\n\t\tthis.getFoodList(this.value);\r\n\t\tthis.getwx();\r\n\t\tthis.appSource();\r\n\t},\r\n\tmethods: {\r\n\t\tgetwx() {\r\n\t\t\tvar ua = window.navigator.userAgent.toLowerCase();\r\n\t\t\tif (ua.match(/MicroMessenger/i) == 'micromessenger') {\r\n\t\t\t\tthis.isWeixin = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.isWeixin = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tappSource() {\r\n\t\t\tconst u = navigator.userAgent,\r\n\t\t\t\tapp = navigator.appVersion;\r\n\t\t\tif (!!u.match(/\\(i[^;]+;( U;)? CPU.+Mac OS X/)) {\r\n\t\t\t\tthis.isiOS = true;\r\n\t\t\t} else {\r\n\t\t\t\tthis.isiOS = false;\r\n\t\t\t}\r\n\t\t},\r\n\t\tsetout() {\r\n\t\t\tthis.foodList = [];\r\n\t\t\tthis.page = 1;\r\n\t\t},\r\n\t\tonLoadMore(done) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (!this.enableLoadMore) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.page = this.page + 1;\r\n\t\t\t\tthis.getFoodList(this.value);\r\n\t\t\t\tdone();\r\n\t\t\t}, 500);\r\n\t\t},\r\n\t\tgetFoodList(key) {\r\n\t\t\t// searchMenuList(key, 1, this.page)\r\n\t\t\t// \t.then(response => {\r\n\t\t\t// \t\tif (response.data.result.length < 10) {\r\n\t\t\t// \t\t\tthis.enableLoadMore = false;\r\n\t\t\t// \t\t}\r\n\t\t\t// \t\tthis.foodList = this.foodList.concat(response.data.result);\r\n\t\t\t// \t})\r\n\t\t\t// \t.catch(error => {\r\n\t\t\t// \t\tconsole.log(error);\r\n\t\t\t// \t});\r\n\t\t\t\tlet data = qs.stringify({\r\n\t\t\t\t\tkey:key,\r\n\t\t\t\t\tsort:1,\r\n\t\t\t\t\tpage:this.page\r\n\t\t\t\t});\r\n\t\t\t\taxios({\r\n\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\turl: '/search/recipe',\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t'Content-Type': 'application/x-www-form-urlencoded'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdata\r\n\t\t\t\t}).then(response => {\r\n\t\t\t\t\tif (response.data.result.length < 10) {\r\n\t\t\t\t\t\tthis.enableLoadMore = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.foodList = this.foodList.concat(response.data.result);\r\n\t\t\t\t\tfor(var i=0;i<this.foodList.length;i++){\r\n\t\t\t\t\t\tthis.foodList[i].isThree = new RegExp('http').test(this.foodList[i].faceImg);\r\n\t\t\t\t\t};\r\n\t\t\t\t});\r\n\t\t},\r\n\t\tback() {\r\n\t\t\tthis.$router.go(-1); //返回上一层\r\n\t\t},\r\n\t\tbookDetail(id) {\r\n\t\t\tthis.$router.push({ path: '/cookbookinfo', query: { id: id } });\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./search.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./search.vue?vue&type=template&id=324d7d0d&\"\nimport script from \"./search.vue?vue&type=script&lang=js&\"\nexport * from \"./search.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}