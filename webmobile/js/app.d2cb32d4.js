(function(t){function e(e){for(var o,r,i=e[0],c=e[1],u=e[2],l=0,d=[];l<i.length;l++)r=i[l],a[r]&&d.push(a[r][0]),a[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);f&&f(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],o=!0,r=1;r<n.length;r++){var i=n[r];0!==a[i]&&(o=!1)}o&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var o={},r={app:0},a={app:0},s=[];function i(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-0a315364":"460a611d","chunk-1108f3e7":"c4b8a008","chunk-24e4b03a":"95e6e4da","chunk-25f39a2d":"88dc2775","chunk-2d0b37a0":"1a0929ea","chunk-2d21a418":"9ef03e4a","chunk-5b518d03":"37de87df","chunk-5c7b0d60":"43f36aef","chunk-68d2c746":"001da08e","chunk-6bfcb9da":"27968231","chunk-7e3a2524":"1a39081f"}[t]+".js"}function c(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-0a315364":1,"chunk-1108f3e7":1,"chunk-24e4b03a":1,"chunk-25f39a2d":1,"chunk-5b518d03":1,"chunk-5c7b0d60":1,"chunk-68d2c746":1,"chunk-6bfcb9da":1,"chunk-7e3a2524":1};r[t]?e.push(r[t]):0!==r[t]&&n[t]&&e.push(r[t]=new Promise(function(e,n){for(var o="css/"+({}[t]||t)+"."+{"chunk-0a315364":"8f292577","chunk-1108f3e7":"6883d5e6","chunk-24e4b03a":"1efb66ed","chunk-25f39a2d":"0f0699d7","chunk-2d0b37a0":"31d6cfe0","chunk-2d21a418":"31d6cfe0","chunk-5b518d03":"1442b516","chunk-5c7b0d60":"20e3eed9","chunk-68d2c746":"915ab13c","chunk-6bfcb9da":"0f0699d7","chunk-7e3a2524":"b0e6cc07"}[t]+".css",a=c.p+o,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===o||l===a))return e()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===o||l===a)return e()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=e,f.onerror=function(e){var o=e&&e.target&&e.target.src||a,s=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=o,delete r[t],f.parentNode.removeChild(f),n(s)},f.href=a;var h=document.getElementsByTagName("head")[0];h.appendChild(f)}).then(function(){r[t]=0}));var o=a[t];if(0!==o)if(o)e.push(o[2]);else{var s=new Promise(function(e,n){o=a[t]=[e,n]});e.push(o[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(t),u=function(e){l.onerror=l.onload=null,clearTimeout(d);var n=a[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),r=e&&e.target&&e.target.src,s=new Error("Loading chunk "+t+" failed.\n("+o+": "+r+")");s.type=o,s.request=r,n[1](s)}a[t]=void 0}};var d=setTimeout(function(){u({type:"timeout",target:l})},12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=o,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)c.d(n,o,function(e){return t[e]}.bind(null,o));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var f=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},4360:function(t,e,n){"use strict";var o=n("2b0e"),r=n("2f62"),a=(n("4f37"),n("7ded")),s=n("5f87"),i=n("5c96"),c={state:{token:Object(s["a"])("web_token"),user_info:Object(s["a"])("user_info"),isOpenBox:!1},mutations:{SET_TOKEN:function(t,e){t.token=e},SET_USER:function(t,e){t.user_info=e},SET_OPENBOX:function(t,e){t.isOpenBox=e}},actions:{LoginByCode:function(t,e){var n=t.commit,o=e.phone.trim();return new Promise(function(t,r){Object(a["c"])(o,e.verify).then(function(e){var o=e.data;o.success?(n("SET_TOKEN",o.result.token),Object(s["c"])("web_token",o.result.token),t()):Object(i["Message"])({message:o.message,duration:5e3})}).catch(function(t){r(t)})})},LoginByPsw:function(t,e){var n=t.commit,o=e.phone.trim();return new Promise(function(t,r){Object(a["d"])(o,e.password).then(function(e){var o=e.data;o.success?(n("SET_TOKEN",o.result.token),Object(s["c"])("web_token",o.result.token),t()):Object(i["Message"])({message:o.message,duration:5e3})}).catch(function(t){r(t)})})},GetUserInfo:function(t){var e=t.commit,n=t.state;return new Promise(function(t,o){Object(a["a"])(n.token).then(function(n){var o=n.data;o.success?(e("SET_USER",o.result),Object(s["c"])("user_info",o.result)):Object(i["Message"])({message:o.message,duration:5e3}),t(n)}).catch(function(t){o(t)})})},LogOut:function(t){var e=t.commit;t.state;return new Promise(function(t,n){Object(a["b"])().then(function(n){var o=n.data;o.success?(e("SET_TOKEN",""),e("SET_USER",""),Object(s["b"])("web_token"),Object(s["b"])("user_info"),t()):Object(i["Message"])({message:o.message,duration:5e3})}).catch(function(t){n(t)})})},FedLogOut:function(t){var e=t.commit;return new Promise(function(t){e("SET_TOKEN",""),Object(s["b"])("web_token"),Object(s["b"])("user_info"),t()})},toggleBox:function(t,e){var n=t.commit;n("SET_OPENBOX",e)}}},u=c,l={token:function(t){return t.user.token},isOpenBox:function(t){return t.user.isOpenBox},user_info:function(t){return t.user.user_info},setting:function(t){return t.user.setting}},d=l;o["default"].use(r["a"]);var f=new r["a"].Store({modules:{user:u},getters:d});e["a"]=f},4447:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t.isRouterAlive?n("router-view"):t._e()],1)},a=[],s=n("7f5c"),i={name:"app",components:{index:s["a"]},provide:function(){return{reload:this.reload}},data:function(){return{isRouterAlive:!0}},methods:{reload:function(){this.isRouterAlive=!1,this.$nextTick(function(){this.isRouterAlive=!0})}}},c=i,u=n("2877"),l=Object(u["a"])(c,r,a,!1,null,null,null),d=l.exports,f=(n("a3af"),n("b970")),h=(n("157a"),n("a2f0"),n("7340"),n("9883")),p=n("bc3a"),m=n.n(p),g=n("4360"),v=(n("d4b8"),n("2f62"));o["default"].use(f["a"]),m.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",m.a.defaults.baseURL="https://m.guanfan.top/api",o["default"].prototype.$axios=m.a,o["default"].use(v["a"]),o["default"].config.productionTip=!1,h["a"].afterEach(function(t,e,n){window.scrollTo(0,0)}),new o["default"]({el:"#app",router:h["a"],store:g["a"],render:function(t){return t(d)}}).$mount("#app")},"5f87":function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"c",function(){return s}),n.d(e,"b",function(){return i});var o=n("a78e"),r=n.n(o);function a(t){return r.a.get(t)}function s(t,e){return r.a.set(t,e)}function i(t){return r.a.remove(t)}},7340:function(t,e,n){},7825:function(t,e,n){},"7ded":function(t,e,n){"use strict";var o=n("bc3a"),r=n.n(o),a=n("4360"),s=(n("9883"),n("5f87")),i=n("4328"),c=r.a.create({baseURL:"https://m.guanfan.top/api",timeout:5e3,headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},transformRequest:[function(t){return i.stringify(t,{indices:!1})}]});c.interceptors.request.use(function(t){return t.headers["token"]=Object(s["a"])("web_token")||"",t},function(t){console.log(t),Promise.reject(t)}),c.interceptors.response.use(function(t){var e=t.data;return 0!==e.code?("9999"==e.code&&(console.log(a["a"].getters.isOpenBox),a["a"].getters.isOpenBox||(a["a"].dispatch("toggleBox",!0).then(function(){}),console.log(a["a"].getters.isOpenBox))),Promise.reject("error")):t},function(t){return console.log("err"+t),Promise.reject(t)});var u=c;function l(t,e){var n={phone:t,verify:e,type:2};return u({url:"/user/login",method:"post",data:n})}function d(t,e){var n={phone:t,password:e,type:1};return u({url:"/user/login",method:"post",data:n})}function f(){return u({url:"/user/personinfo",method:"post"})}function h(t,e){var n={phone:t,type:e};return u({url:"/user/sendsms",method:"post",data:n})}function p(t){return u({url:"/user/register",method:"post",data:t})}function m(){return u({url:"/user/logout",method:"post"})}n.d(e,"c",function(){return l}),n.d(e,"d",function(){return d}),n.d(e,"a",function(){return f}),n.d(e,"e",function(){return h}),n.d(e,"f",function(){return p}),n.d(e,"b",function(){return m})},"7f45":function(t,e,n){"use strict";var o=n("7825"),r=n.n(o);r.a},"7f5c":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-nav-bar",{staticClass:"hader indexhader",attrs:{"left-text":"返回","left-arrow":""}},[n("router-link",{attrs:{slot:"left",to:"/"},slot:"left"},[n("div",{staticClass:"logo"})]),1!=t.isiOS&&1!=t.isWeixin?n("a",{attrs:{slot:"right",href:"https://m.guanfan.top/#/app"},slot:"right"},[n("van-button",{attrs:{type:"primary",size:"small"}},[t._v("安装APP")])],1):t._e(),1==t.isiOS&&1!=t.isWeixin?n("a",{attrs:{slot:"right",href:"https://apps.apple.com/cn/app/id1487127641"},slot:"right"},[n("van-button",{attrs:{type:"primary",size:"small"}},[t._v("安装APP")])],1):t._e(),1==t.isWeixin?n("a",{attrs:{slot:"right",href:"https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzU0NTg5ODQzNA==&scene=124#wechat_redirect"},slot:"right"},[n("van-button",{attrs:{type:"primary",size:"small"}},[t._v("关注")])],1):t._e()],1),n("div",{staticClass:"cont"},[n("van-search",{staticClass:"mb10",attrs:{placeholder:"请输入搜索关键词","show-action":"",focus:"",shape:"round"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[n("div",{attrs:{slot:"action"},on:{click:function(e){return t.Search(t.value)}},slot:"action"},[t._v("搜索")])]),t._m(0),n("div",{staticClass:"hot-txet"},[n("ul",t._l(t.hottext,function(e,o){return n("li",{key:o,on:{click:function(n){return t.Search(e)}}},[t._v(t._s(e))])}),0)]),n("div",{staticClass:"muen-img mt10"},[n("router-link",{staticClass:"left",attrs:{to:"/themelist"}}),n("router-link",{staticClass:"right",attrs:{to:"/sort"}})],1),t._m(1),n("LoadMore",{attrs:{onLoadMore:t.onLoadMore,enableLoadMore:t.enableLoadMore}},[n("div",{staticClass:"food-list1"},[n("ul",t._l(t.foodlist,function(e,o){return n("li",{key:o,on:{click:function(n){return t.bookDetail(e.cpid)}}},[n("div",{staticClass:"foodlist-img",style:{backgroundImage:"url("+t.osshost+e.cpimg+t.listpic+")"}}),n("div",{staticClass:"food-list1-tit text-cut"},[t._v(t._s(e.cptitle))]),n("div",{staticClass:"user"},[e.faceimg?t._e():n("img",{attrs:{src:t.imgurl}}),e.faceimg&&0==e.isThree?n("img",{attrs:{src:t.osshost+e.faceimg+t.userface}}):t._e(),e.faceimg&&1==e.isThree?n("img",{attrs:{src:e.faceimg}}):t._e(),n("span",[t._v(t._s(e.nickname))]),n("van-icon",{staticClass:"icon-like2",attrs:{name:"like"}},[t._v(t._s(e.collections))])],1)])}),0)])])],1),n("Totop")],1)},r=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",{staticClass:"text-18 tit mb10"},[n("span",{staticClass:"icon icon-hot"}),t._v("\n\t\t\t热门搜索\n\t\t")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("h2",{staticClass:"text-18 tit mb10"},[n("span",{staticClass:"icon icon-jx"}),t._v("\n\t\t\t精选食谱\n\t\t")])}],a=(n("3b2b"),n("4917"),n("4328")),s=n.n(a),i=n("bc3a"),c=n.n(i),u=n("eafa"),l=n("83e6"),d={components:{LoadMore:u["a"],Totop:l["a"]},data:function(){return{labelPosition:"top",listpic:"?x-oss-process=style/list-img",userface:"?x-oss-process=style/user-img",detailpic:"?x-oss-process=style/detail-img",osshost:"http://guanfan.oss-cn-hangzhou.aliyuncs.com/",hottext:[],foodlist:[],enableLoadMore:!0,page:1,value:"",isWeixin:"",isiOS:"",imgurl:"../assets/img/userIcon.png",isThree:!1}},created:function(){this.getMenu(),this.getHot(),this.getwx(),this.appSource()},methods:{getwx:function(){var t=window.navigator.userAgent.toLowerCase();"micromessenger"==t.match(/MicroMessenger/i)?this.isWeixin=!0:this.isWeixin=!1},appSource:function(){var t=navigator.userAgent;navigator.appVersion;t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?this.isiOS=!0:this.isiOS=!1},onLoadMore:function(t){var e=this;setTimeout(function(){e.enableLoadMore&&(e.page=e.page+1,e.getMenu(),t())},500)},Search:function(t){this.$router.push({path:"/search",query:{key:t}})},getMenu:function(){var t=this,e=s.a.stringify({page:this.page});c()({method:"post",url:"/index/featuredrecipe",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e}).then(function(e){if(e.data.success){e.data.result.length<10&&(t.enableLoadMore=!1),t.foodlist=t.foodlist.concat(e.data.result);for(var n=0;n<t.foodlist.length;n++)t.foodlist[n].isThree=new RegExp("http").test(t.foodlist[n].faceimg)}})},getHot:function(){var t=this;c()({method:"post",url:"/search/hotword",headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){e.data.success&&(t.hottext=e.data.result)})},bookDetail:function(t){this.$router.push({path:"/cookbookinfo",query:{id:t}})}}},f=d,h=n("2877"),p=Object(h["a"])(f,o,r,!1,null,null,null);e["a"]=p.exports},"83e6":function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showTop,expression:"showTop"}],staticClass:"scrollTop",on:{click:t.toTop}},[n("van-icon",{attrs:{name:"arrow-up"}})],1)},r=[],a={name:"Totop",data:function(){return{scrollTop:0,time:0,dParams:20,scrollState:0}},computed:{showTop:function(){var t=this.scrollTop>200;return t}},mounted:function(){window.addEventListener("scroll",this.getScrollTop)},methods:{toTop:function(t){if(!this.scrollState){this.scrollState=1,t.preventDefault();document.documentElement.scrollTop||document.body.scrollTop;var e=this;this.time=setInterval(function(){e.gotoTop(e.scrollTop-e.dParams)},10)}},gotoTop:function(t){this.dParams+=20,t=t>0?t:0,document.documentElement.scrollTop=document.body.scrollTop=window.pageYOffset=t,this.scrollTop<10&&(clearInterval(this.time),this.dParams=20,this.scrollState=0)},getScrollTop:function(){this.scrollTop=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop}}},s=a,i=(n("7f45"),n("2877")),c=Object(i["a"])(s,o,r,!1,null,"24fdd3ca",null);e["a"]=c.exports},9883:function(t,e,n){"use strict";var o=n("2b0e"),r=n("8c4f"),a=n("7f5c"),s=n("bc3a"),i=n.n(s);o["default"].use(r["a"]),i.a.defaults.baseURL="https://api.guanfan.top",e["a"]=new r["a"]({routes:[{path:"/",name:"index",component:a["a"]},{path:"/cookbookinfo",name:"cookbookinfo",component:function(){return n.e("chunk-25f39a2d").then(n.bind(null,"f4cc"))}},{path:"/app",name:"app",component:function(){return n.e("chunk-24e4b03a").then(n.bind(null,"398f"))}},{path:"/themeinfo",name:"themeinfo",component:function(){return n.e("chunk-6bfcb9da").then(n.bind(null,"0a54"))}},{path:"/themelist",name:"themelist",component:function(){return n.e("chunk-2d0b37a0").then(n.bind(null,"2914"))}},{path:"/sort",name:"sort",component:function(){return n.e("chunk-0a315364").then(n.bind(null,"925c"))}},{path:"/search",name:"search",component:function(){return n.e("chunk-2d21a418").then(n.bind(null,"bb79"))}},{path:"/dtinfo",name:"dtinfo",component:function(){return n.e("chunk-7e3a2524").then(n.bind(null,"54a0"))}},{path:"/active",name:"active",component:function(){return n.e("chunk-5b518d03").then(n.bind(null,"4d5c"))}},{path:"/codeLogin",name:"codeLogin",component:function(){return n.e("chunk-5c7b0d60").then(n.bind(null,"f79c"))}},{path:"/pswLogin",name:"pswLogin",component:function(){return n.e("chunk-1108f3e7").then(n.bind(null,"0279"))}},{path:"/reg",name:"reg",component:function(){return n.e("chunk-68d2c746").then(n.bind(null,"a40f"))}}]})},a2f0:function(t,e,n){},a3af:function(t,e){var n=32;function o(){var t=document.documentElement.clientWidth/750;document.documentElement.style.fontSize=n*Math.min(t,2)+"px"}o(),window.onresize=function(){o()}},eafa:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"load-more-wrapper",on:{touchstart:function(e){return t.touchStart(e)},touchend:function(e){return t.touchEnd(e)}}},[n("div",{staticClass:"inner"},[t._t("default"),n("div",{directives:[{name:"show",rawName:"v-show",value:t.enableLoadMore,expression:"enableLoadMore"}],staticClass:"load-more"},[n("van-loading",{attrs:{size:"1.2rem"}},[t._v("加载中...")])],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!t.enableLoadMore,expression:"!enableLoadMore"}],staticClass:"load-end",staticStyle:{"font-size":"1rem"}},[t._v("--没有更多咯--")])],2)])},r=[],a={name:"LoadMore",props:{enableLoadMore:{type:Boolean,default:!0},onLoadMore:{type:Function,default:void 0,require:!1}},data:function(){return{loadMoreText:"上拉加载更多",startX:0,startY:0,isLoading:!1}},methods:{touchStart:function(t){this.startY=t.targetTouches[0].pageY,this.startX=t.targetTouches[0].pageX},scrollToEnd:function(t){var e=this.$el.scrollHeight,n=this.$el.clientHeight,o=this.$el.scrollTop;(o+n>=e||this.enableLoadMore)&&this.doLoadMore()},touchEnd:function(t){if(!this.isLoading){var e=t.changedTouches[0].pageX,n=t.changedTouches[0].pageY,o=this.startY-n,r=e-this.startX;Math.abs(r)<2&&Math.abs(o)<2||n<this.startY&&this.scrollToEnd(t)}},doLoadMore:function(){this.isLoading=!0,this.loadMoreText="加载中...",this.onLoadMore(this.loadDone)},loadDone:function(){this.isLoading=!1,this.loadMoreText="上拉加载更多"}}},s=a,i=(n("f917"),n("2877")),c=Object(i["a"])(s,o,r,!1,null,"63035df5",null);e["a"]=c.exports},f917:function(t,e,n){"use strict";var o=n("4447"),r=n.n(o);r.a}});
//# sourceMappingURL=app.d2cb32d4.js.map