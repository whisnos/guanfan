(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a418"],{bb79:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("van-nav-bar",{staticClass:"hader",attrs:{title:"菜谱搜索","left-text":"返回","left-arrow":""},on:{"click-left":function(e){return t.back()}}},[1!=t.isiOS&&1!=t.isWeixin?s("a",{attrs:{slot:"right",href:"https://m.guanfan.top/#/app"},slot:"right"},[s("van-button",{attrs:{type:"primary",size:"small"}},[t._v("安装APP")])],1):t._e(),1==t.isiOS&&1!=t.isWeixin?s("a",{attrs:{slot:"right",href:"https://apps.apple.com/cn/app/id1487127641"},slot:"right"},[s("van-button",{attrs:{type:"primary",size:"small"}},[t._v("安装APP")])],1):t._e(),1==t.isWeixin?s("a",{attrs:{slot:"right",href:"https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzU0NTg5ODQzNA==&scene=124#wechat_redirect"},slot:"right"},[s("van-button",{attrs:{type:"primary",size:"small"}},[t._v("关注")])],1):t._e()]),s("div",{staticClass:"cont mt10"},[s("van-search",{staticClass:"mb10",attrs:{placeholder:"请输入搜索关键词","show-action":"",shape:"round"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},[s("div",{attrs:{slot:"action"},on:{click:function(e){t.getFoodList(t.value),t.setout()}},slot:"action"},[t._v("搜索")])]),s("LoadMore",{attrs:{onLoadMore:t.onLoadMore,enableLoadMore:t.enableLoadMore}},[s("div",{staticClass:"food-list1 food-list2"},[s("ul",t._l(t.foodList,function(e,i){return s("li",{key:i,on:{click:function(s){return t.bookDetail(e.id)}}},[s("div",{staticClass:"foodlist-img",style:{backgroundImage:"url("+t.osshost+e.cpimg+t.listpic+")"}}),s("div",{staticClass:"food-list1-tit text-cut"},[t._v(t._s(e.title))]),s("div",{staticClass:"user"},[e.faceImg?t._e():s("img",{attrs:{src:t.imgurl}}),e.faceImg&&0==e.isThree?s("img",{attrs:{src:t.osshost+e.faceImg+t.userface}}):t._e(),e.faceImg&&1==e.isThree?s("img",{attrs:{src:e.faceImg}}):t._e(),s("span",[t._v(t._s(e.nickname))]),s("i",{staticClass:"icon-like2 van-icon van-icon-like"},[t._v(t._s(e.collections))])])])}),0)])]),s("Totop")],1)],1)},o=[],a=(s("3b2b"),s("4917"),s("4328")),n=s.n(a),r=s("bc3a"),c=s.n(r),l=s("eafa"),u=s("83e6"),p={components:{LoadMore:l["a"],Totop:u["a"]},data:function(){return{sortList:"",foodList:[],osshost:"http://guanfan.oss-cn-hangzhou.aliyuncs.com/",listpic:"?x-oss-process=style/list-img",userface:"?x-oss-process=style/user-img",detailpic:"?x-oss-process=style/detail-img",enableLoadMore:!0,page:1,size:10,key:"",value:"",isWeixin:"",isiOS:"",imgurl:"../assets/img/userIcon.png",isThree:!1}},created:function(){this.key=this.$route.query.key,this.value=this.key,this.getFoodList(this.value),this.getwx(),this.appSource()},methods:{getwx:function(){var t=window.navigator.userAgent.toLowerCase();"micromessenger"==t.match(/MicroMessenger/i)?this.isWeixin=!0:this.isWeixin=!1},appSource:function(){var t=navigator.userAgent;navigator.appVersion;t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?this.isiOS=!0:this.isiOS=!1},setout:function(){this.foodList=[],this.page=1},onLoadMore:function(t){var e=this;setTimeout(function(){e.enableLoadMore&&(e.page=e.page+1,e.getFoodList(e.value),t())},500)},getFoodList:function(t){var e=this,s=n.a.stringify({key:t,sort:1,page:this.page});c()({method:"post",url:"/search/recipe",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:s}).then(function(t){t.data.result.length<10&&(e.enableLoadMore=!1),e.foodList=e.foodList.concat(t.data.result);for(var s=0;s<e.foodList.length;s++)e.foodList[s].isThree=new RegExp("http").test(e.foodList[s].faceImg)})},back:function(){this.$router.go(-1)},bookDetail:function(t){this.$router.push({path:"/cookbookinfo",query:{id:t}})}}},h=p,d=s("2877"),f=Object(d["a"])(h,i,o,!1,null,null,null);e["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d21a418.9ef03e4a.js.map