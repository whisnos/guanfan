(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21a418"],{bb79:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("van-nav-bar",{staticClass:"hader",attrs:{title:"菜谱搜索","left-text":"返回","left-arrow":""},on:{"click-left":function(s){return t.back()}}},[1!=t.isiOS&&1!=t.isWeixin?e("a",{attrs:{slot:"right",href:"https://m.guanfan.top/#/app"},slot:"right"},[e("van-button",{attrs:{type:"primary",size:"small"}},[t._v("安装APP")])],1):t._e(),1==t.isiOS&&1!=t.isWeixin?e("a",{attrs:{slot:"right",href:"https://apps.apple.com/cn/app/id1487127641"},slot:"right"},[e("van-button",{attrs:{type:"primary",size:"small"}},[t._v("安装APP")])],1):t._e(),1==t.isWeixin?e("a",{attrs:{slot:"right",href:"https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzU0NTg5ODQzNA==&scene=124#wechat_redirect"},slot:"right"},[e("van-button",{attrs:{type:"primary",size:"small"}},[t._v("关注")])],1):t._e()]),e("div",{staticClass:"cont mt10"},[e("van-search",{staticClass:"mb10",attrs:{placeholder:"请输入搜索关键词","show-action":"",shape:"round"},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}},[e("div",{attrs:{slot:"action"},on:{click:function(s){t.getFoodList(t.value),t.setout()}},slot:"action"},[t._v("搜索")])]),e("LoadMore",{attrs:{onLoadMore:t.onLoadMore,enableLoadMore:t.enableLoadMore}},[e("div",{staticClass:"food-list1 food-list2"},[e("ul",t._l(t.foodList,function(s,i){return e("li",{key:i,on:{click:function(e){return t.bookDetail(s.id)}}},[e("div",{staticClass:"foodlist-img",style:{backgroundImage:"url("+t.osshost+s.cpimg+t.listpic+")"}}),e("div",{staticClass:"food-list1-tit text-cut"},[t._v(t._s(s.title))]),e("div",{staticClass:"user"},[e("img",{attrs:{src:t.osshost+s.faceImg+t.userface}}),e("span",[t._v(t._s(s.nickname))]),e("i",{staticClass:"icon-like2 van-icon van-icon-like"},[t._v(t._s(s.collections))])])])}),0)])]),e("Totop")],1)],1)},o=[],a=(e("4917"),e("4328")),n=e.n(a),r=e("bc3a"),c=e.n(r),l=e("eafa"),u=e("83e6"),p={components:{LoadMore:l["a"],Totop:u["a"]},data:function(){return{sortList:"",foodList:[],osshost:"https://guanfan.oss-cn-hangzhou.aliyuncs.com/",listpic:"?x-oss-process=style/list-img",userface:"?x-oss-process=style/user-img",detailpic:"?x-oss-process=style/detail-img",enableLoadMore:!0,page:1,size:10,key:"",value:"",isWeixin:"",isiOS:""}},created:function(){this.key=this.$route.query.key,this.value=this.key,this.getFoodList(this.value),this.getwx(),this.appSource()},methods:{getwx:function(){var t=window.navigator.userAgent.toLowerCase();"micromessenger"==t.match(/MicroMessenger/i)?this.isWeixin=!0:this.isWeixin=!1},appSource:function(){var t=navigator.userAgent;navigator.appVersion;t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?this.isiOS=!0:this.isiOS=!1},setout:function(){this.foodList=[],this.page=1},onLoadMore:function(t){var s=this;setTimeout(function(){s.enableLoadMore&&(s.page=s.page+1,s.getFoodList(s.value),t())},500)},getFoodList:function(t){var s=this,e=n.a.stringify({key:t,sort:1,page:this.page});c()({method:"post",url:"/search/recipe",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e}).then(function(t){t.data.result.length<10&&(s.enableLoadMore=!1),s.foodList=s.foodList.concat(t.data.result)})},back:function(){this.$router.go(-1)},bookDetail:function(t){this.$router.push({path:"/cookbookinfo",query:{id:t}})}}},h=p,d=e("2877"),f=Object(d["a"])(h,i,o,!1,null,null,null);s["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d21a418.f1652086.js.map