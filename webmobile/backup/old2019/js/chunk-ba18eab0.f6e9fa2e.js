(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ba18eab0"],{2257:function(t,i,e){},"28a5":function(t,i,e){"use strict";var s=e("aae3"),a=e("cb7c"),n=e("ebd6"),o=e("0390"),r=e("9def"),c=e("5f1b"),l=e("520a"),u=e("79e5"),d=Math.min,p=[].push,f="split",h="length",m="lastIndex",g=4294967295,v=!u(function(){RegExp(g,"y")});e("214f")("split",2,function(t,i,e,u){var y;return y="c"=="abbc"[f](/(b)*/)[1]||4!="test"[f](/(?:)/,-1)[h]||2!="ab"[f](/(?:ab)*/)[h]||4!="."[f](/(.?)(.?)/)[h]||"."[f](/()()/)[h]>1||""[f](/.?/)[h]?function(t,i){var a=String(this);if(void 0===t&&0===i)return[];if(!s(t))return e.call(a,t,i);var n,o,r,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,f=void 0===i?g:i>>>0,v=new RegExp(t.source,u+"g");while(n=l.call(v,a)){if(o=v[m],o>d&&(c.push(a.slice(d,n.index)),n[h]>1&&n.index<a[h]&&p.apply(c,n.slice(1)),r=n[0][h],d=o,c[h]>=f))break;v[m]===n.index&&v[m]++}return d===a[h]?!r&&v.test("")||c.push(""):c.push(a.slice(d)),c[h]>f?c.slice(0,f):c}:"0"[f](void 0,0)[h]?function(t,i){return void 0===t&&0===i?[]:e.call(this,t,i)}:e,[function(e,s){var a=t(this),n=void 0==e?void 0:e[i];return void 0!==n?n.call(e,a,s):y.call(String(a),e,s)},function(t,i){var s=u(y,t,this,i,y!==e);if(s.done)return s.value;var l=a(t),p=String(this),f=n(l,RegExp),h=l.unicode,m=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(v?"y":"g"),k=new f(v?l:"^(?:"+l.source+")",m),b=void 0===i?g:i>>>0;if(0===b)return[];if(0===p.length)return null===c(k,p)?[p]:[];var _=0,x=0,w=[];while(x<p.length){k.lastIndex=v?x:0;var L,C=c(k,v?p:p.slice(x));if(null===C||(L=d(r(k.lastIndex+(v?0:x)),p.length))===_)x=o(p,x,h);else{if(w.push(p.slice(_,x)),w.length===b)return w;for(var M=1;M<=C.length-1;M++)if(w.push(C[M]),w.length===b)return w;x=_=L}}return w.push(p.slice(_)),w}]})},"4d5c":function(t,i,e){"use strict";e.r(i);var s=function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",[s("van-nav-bar",{staticClass:"hader",attrs:{title:t.activeinfo.name,"left-text":"主页","left-arrow":""},on:{"click-left":function(i){return t.back()}}},[1!=t.isiOS&&1!=t.isWeixin?s("a",{attrs:{slot:"right",href:"https://m.guanfan.top/#/app"},slot:"right"},[s("van-button",{attrs:{type:"primary",size:"small"}},[t._v("安装APP")])],1):t._e(),1==t.isiOS&&1!=t.isWeixin?s("a",{attrs:{slot:"right",href:"https://apps.apple.com/cn/app/id1487127641"},slot:"right"},[s("van-button",{attrs:{type:"primary",size:"small"}},[t._v("安装APP")])],1):t._e(),1==t.isWeixin?s("a",{attrs:{slot:"right",href:"https://mp.weixin.qq.com/mp/profile_ext?action=home&__biz=MzU0NTg5ODQzNA==&scene=124#wechat_redirect"},slot:"right"},[s("van-button",{attrs:{type:"primary",size:"small"}},[t._v("关注")])],1):t._e()]),s("div",{staticClass:"ac-info",staticStyle:{"margin-top":"3.5rem"}},t._l(t.activeinfo.content,function(i,e){return s("img",{key:e,style:i.imgstyle,attrs:{src:t.osshost+i.imgurl},on:{click:function(e){return t.navToDetail(i.navtype,i.navid)}}})}),0),s("div",{staticClass:"cont mt10",staticStyle:{"margin-top":"0.5rem"}},[2==t.activeinfo.status?s("div",[1!=t.isiOS&&1!=t.isWeixin?s("a",{attrs:{slot:"right",href:"https://m.guanfan.top/#/app"},slot:"right"},[s("van-button",{staticClass:"wb100 mt10 mb10",attrs:{type:"primary"}},[t._v("去APP参与活动")])],1):t._e(),1==t.isiOS&&1!=t.isWeixin?s("a",{attrs:{slot:"right",href:"https://apps.apple.com/cn/app/id1487127641"},slot:"right"},[s("van-button",{staticClass:"wb100 mt10 mb10",attrs:{type:"primary"}},[t._v("去APP参与活动")])],1):t._e(),1==t.isWeixin?s("div",{staticClass:"gzh-guanzhu"},[s("img",{attrs:{src:e("71f3")}}),s("span",[t._v("长按识别二维码，关注管饭美食参与活动")])]):t._e()]):s("div",[1!=t.isiOS&&1!=t.isWeixin?s("a",{attrs:{slot:"right",href:"https://m.guanfan.top/#/app"},slot:"right"},[s("van-button",{staticClass:"wb100 mt10 mb10",attrs:{type:"primary"}},[t._v("去APP参与更多活动")])],1):t._e(),1==t.isiOS&&1!=t.isWeixin?s("a",{attrs:{slot:"right",href:"https://apps.apple.com/cn/app/id1487127641"},slot:"right"},[s("van-button",{staticClass:"wb100 mt10 mb10",attrs:{type:"primary"}},[t._v("去APP参与更多活动")])],1):t._e(),1==t.isWeixin?s("div",{staticClass:"gzh-guanzhu"},[s("img",{attrs:{src:e("71f3")}}),s("span",[t._v("关注管饭美食参与更多活动")])]):t._e()]),0!=t.activeinfo.sponsorid?s("div",[s("h3",{staticClass:"van-doc-demo-block__title mt15 mb15"},[t._v("赞助商")]),s("ul",{staticClass:"dr_list"},[s("li",{staticClass:"clearfix mb15"},[s("div",{staticClass:"left headicon bg-img br50",style:{backgroundImage:"url("+t.osshost+t.userinfo.imgurl+t.userface+")"}}),s("div",{staticClass:"info"},[s("h2",{staticClass:"text-bold text-df text-16"},[t._v(t._s(t.userinfo.nickname))])]),s("div",{staticClass:"info2"},[s("h3",{staticClass:"text-bold text-df text-14"},[t._v(t._s(t.userinfo.personalprofile))])])])])]):t._e(),s("h3",{staticClass:"van-doc-demo-block__title mt15 mb15"},[t._v("饭友参与作品")]),s("LoadMore",{attrs:{onLoadMore:t.onLoadMore,enableLoadMore:t.enableLoadMore}},[1==t.activeinfo.type?s("div",{staticClass:"food-list1 food-list2"},[s("ul",t._l(t.foodList,function(i,e){return s("li",{key:e},[s("div",{staticClass:"foodlist-img",style:{backgroundImage:"url("+t.osshost+i.dtimg+t.listpic+")"},on:{click:function(e){return t.navToDetail(1,i.id)}}}),s("div",{staticClass:"food-list1-tit text-cut"},[t._v(t._s(i.description))]),s("div",{staticClass:"user"},[s("img",{attrs:{src:t.osshost+i.faceimg+t.userface}}),s("span",[t._v(t._s(i.nickname))])]),s("i",{staticClass:"icon-like van-icon van-icon-good-job",class:1==i.isliked?"text-red":"",on:{click:function(s){return t.changeLike(i.id,e)}}},[t._v(t._s(i.likecount))])])}),0)]):t._e(),2==t.activeinfo.type?s("div",{staticClass:"food-list1 food-list2"},[s("ul",t._l(t.menuList,function(i,e){return s("li",{key:e},[s("div",{staticClass:"foodlist-img",style:{backgroundImage:"url("+t.osshost+i.cpimg+t.listpic+")"},on:{click:function(e){return t.navToDetail(2,i.cpid)}}}),s("div",{staticClass:"food-list1-tit text-cut"},[t._v(t._s(i.cptitle))]),s("div",{staticClass:"user"},[s("img",{attrs:{src:t.osshost+i.faceimg+t.userface}}),s("span",[t._v(t._s(i.nickname))])]),s("i",{staticClass:"icon-like van-icon van-icon-like",class:1==i.iscollectioned?"text-red":"",on:{click:function(s){return t.changeCollection(i.cpid,e)}}},[t._v(t._s(i.collections))])])}),0)]):t._e()])],1)],1)},a=[],n=(e("28a5"),e("4917"),e("4328")),o=e.n(n),r=e("bc3a"),c=e.n(r),l=e("eafa"),u={name:"activeinfo",components:{LoadMore:l["a"]},data:function(){return{num:13,sortList:"",activeinfo:"",userinfo:"",osshost:"http://guanfan.oss-cn-hangzhou.aliyuncs.com/",listpic:"?x-oss-process=style/list-img",userface:"?x-oss-process=style/user-img",detailpic:"?x-oss-process=style/detail-img",isWeixin:"",isiOS:"",uid:"",enableLoadMore:!0,page:1,type:"",foodList:[],menuList:[],token:""}},created:function(){this.aid=this.$route.query.id,this.token=this.$store.state.user.token||"",this.getDataInfo(this.aid),this.getwx(),this.appSource()},methods:{getwx:function(){var t=window.navigator.userAgent.toLowerCase();"micromessenger"==t.match(/MicroMessenger/i)?this.isWeixin=!0:this.isWeixin=!1},appSource:function(){var t=navigator.userAgent;navigator.appVersion;t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)?this.isiOS=!0:this.isiOS=!1},onLoadMore:function(t){var i=this;setTimeout(function(){i.enableLoadMore&&(i.page=i.page+1,1==i.activeinfo.type&&i.getDtList(),2==i.activeinfo.type&&i.getMenUList(),t())},500)},getDataInfo:function(t){var i=this,e=o.a.stringify({campaignid:t});c()({method:"post",url:"/campaign/detail",headers:{"Content-Type":"application/x-www-form-urlencoded",token:this.token},data:e}).then(function(t){t.data.success&&(i.activeinfo=t.data.result,i.uid=i.activeinfo.sponsorid,i.getUserInfo(i.uid),1==i.activeinfo.type?i.getDtList():i.getMenUList())})},getUserInfo:function(t){var i=this,e=o.a.stringify({sponsorid:t});c()({method:"post",url:"/campaign/sponsor",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:e}).then(function(t){t.data.success&&(i.userinfo=t.data.result)})},getDtList:function(){var t=this,i=o.a.stringify({page:this.page,campaignid:this.aid,ctype:1});c()({method:"post",url:"/campaign/dtlist",headers:{"Content-Type":"application/x-www-form-urlencoded",token:this.token},data:i}).then(function(i){if(i.data.success){i.data.result.length<10&&(t.enableLoadMore=!1),t.foodList=t.foodList.concat(i.data.result);for(var e=0;e<t.foodList.length;e++)t.foodList[e].dtimg=t.foodList[e].dtimg.split("|"),t.foodList[e].dtimg=t.foodList[e].dtimg[0]}})},getMenUList:function(){var t=this,i=o.a.stringify({page:this.page,campaignid:this.aid,ctype:1});c()({method:"post",url:"/campaign/cplist",headers:{"Content-Type":"application/x-www-form-urlencoded",token:this.token},data:i}).then(function(i){i.data.success&&(i.data.result.length<10&&(t.enableLoadMore=!1),t.menuList=t.menuList.concat(i.data.result))})},navToDetail:function(t,i){if(1==t)this.$router.push({path:"/dtinfo",query:{id:i}});else if(2==t)this.$router.push({path:"/cookbookinfo",query:{id:i}});else if(3==t)this.$router.push({path:"/themeinfo",query:{id:i}});else if(4==t)return},back:function(){this.$router.push({path:"/"})},changeLike:function(t,i){var e=this;if(""==this.token)this.$router.push({path:"/pswLogin"});else if(1==this.foodList[i].isliked){var s=o.a.stringify({itemid:t,itemtype:1});c()({method:"post",url:"/action/unlike",headers:{"Content-Type":"application/x-www-form-urlencoded",token:this.token},data:s}).then(function(t){t.data.success&&(e.foodList[i].isliked=0,e.foodList[i].likecount--)})}else{var a=o.a.stringify({itemid:t,itemtype:1});c()({method:"post",url:"/action/like",headers:{"Content-Type":"application/x-www-form-urlencoded",token:this.token},data:a}).then(function(t){t.data.success&&(e.foodList[i].isliked=1,e.foodList[i].likecount++)})}},changeCollection:function(t,i){var e=this;if(""==this.token)this.$router.push({path:"/pswLogin"});else if(1==this.menuList[i].iscollectioned){var s=o.a.stringify({itemid:t,itemtype:2});c()({method:"post",url:"/action/uncollection",headers:{"Content-Type":"application/x-www-form-urlencoded",token:this.token},data:s}).then(function(t){t.data.success&&(e.menuList[i].iscollectioned=0,e.menuList[i].collections--)})}else{var a=o.a.stringify({itemid:t,itemtype:2});c()({method:"post",url:"/action/collection",headers:{"Content-Type":"application/x-www-form-urlencoded",token:this.token},data:a}).then(function(t){t.data.success&&(e.menuList[i].iscollectioned=1,e.menuList[i].collections++)})}}}},d=u,p=(e("d68c"),e("2877")),f=Object(p["a"])(d,s,a,!1,null,null,null);i["default"]=f.exports},"71f3":function(t,i,e){t.exports=e.p+"img/qr.2398bca3.jpg"},aae3:function(t,i,e){var s=e("d3f4"),a=e("2d95"),n=e("2b4c")("match");t.exports=function(t){var i;return s(t)&&(void 0!==(i=t[n])?!!i:"RegExp"==a(t))}},d68c:function(t,i,e){"use strict";var s=e("2257"),a=e.n(s);a.a}}]);
//# sourceMappingURL=chunk-ba18eab0.f6e9fa2e.js.map